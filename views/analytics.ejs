<!DOCTYPE html>
<html>
<head>
  <title>Analytics Dashboard - RAPIDWIFI-ZONE</title>
  <link rel="stylesheet" href="/styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header>
    <h1>Analytics Dashboard</h1>
    <nav>
      <a href="/admin">Admin Dashboard</a>
      <a href="/logout">Logout</a>
    </nav>
  </header>

  <main>
    <h2>System Analytics</h2>
    <div class="analytics-container">
      <!-- Active vs Inactive Vouchers -->
      <div class="chart-card">
        <h3>Active vs Inactive Vouchers</h3>
        <div class="chart-wrapper">
          <canvas id="statusChart"></canvas>
        </div>
      </div>

      <!-- Vouchers by Profile -->
      <div class="chart-card">
        <h3>Vouchers by Profile</h3>
        <div class="chart-wrapper">
          <canvas id="profileChart"></canvas>
        </div>
      </div>

      <!-- Exports by Profile -->
      <div class="chart-card">
        <h3>Exports by Profile</h3>
        <div class="chart-wrapper">
          <canvas id="exportsProfileChart"></canvas>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <p>&copy; 2026 RAPIDWIFI-ZONE</p>
  </footer>

  <script>
    // Active vs Inactive Vouchers
    new Chart(document.getElementById('statusChart'), {
      type: 'doughnut',
      data: {
        labels: ['Active', 'Inactive'],
        datasets: [{
          data: [<%= active %>, <%= inactive %>],
          backgroundColor: ['#0077cc', '#cccccc']
        }]
      },
      options: { responsive: true, maintainAspectRatio: false }
    });

    // Vouchers by Profile
    new Chart(document.getElementById('profileChart'), {
      type: 'bar',
      data: {
        labels: <%- JSON.stringify(profiles.map(p => p.profile)) %>,
        datasets: [{
          label: 'Vouchers',
          data: <%- JSON.stringify(profiles.map(p => p.count)) %>,
          backgroundColor: '#00aa77'
        }]
      },
      options: { responsive: true, maintainAspectRatio: false }
    });

    // Exports by Profile
    new Chart(document.getElementById('exportsProfileChart'), {
      type: 'bar',
      data: {
        labels: <%- JSON.stringify(exportsByProfile.map(p => p.profile)) %>,
        datasets: [{
          label: 'Exports',
          data: <%- JSON.stringify(exportsByProfile.map(p => p.count)) %>,
          backgroundColor: '#004aad'
        }]
      },
      options: { responsive: true, maintainAspectRatio: false }
    });
  </script>
</body>
</html>

