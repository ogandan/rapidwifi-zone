<!DOCTYPE html>
<html>
<head>
  <title>Audit Log Viewer</title>
  <link rel="stylesheet" href="/styles/style.css">
</head>
<body>
  <header>
    <h1>RAPIDWIFI-ZONE Audit Logs</h1>
    <nav>
      <a href="/admin">Admin</a> |
      <a href="/dashboard">Dashboard</a> |
      <a href="/logout">Logout</a>
    </nav>
  </header>

  <section>
    <h2>Audit Entries</h2>
    <table border="1" cellpadding="5">
      <thead>
        <tr>
          <th>Timestamp</th>
          <th>Type</th>
          <th>Details</th>
        </tr>
      </thead>
      <tbody id="auditTable"></tbody>
    </table>
  </section>

  <footer>
    <p>Â© 2026 RAPIDWIFI-ZONE</p>
  </footer>

  <script>
    // Fetch audit log entries
    fetch('/api/vouchers/audit?format=json')
      .then(res => res.json())
      .then(entries => {
        const table = document.getElementById('auditTable');
        table.innerHTML = '';
        entries.forEach(entry => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${entry.timestamp}</td>
            <td>${entry.type}</td>
            <td><pre>${JSON.stringify(entry.details, null, 2)}</pre></td>
          `;
          table.appendChild(tr);
        });
      })
      .catch(err => {
        const table = document.getElementById('auditTable');
        table.innerHTML = `<tr><td colspan="3">Failed to load audit logs: ${err.message}</td></tr>`;
      });
  </script>
</body>
</html>

